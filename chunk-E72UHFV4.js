import{a as ie,b as $,c as ne,d as oe}from"./chunk-5FB26SDE.js";import{$ as U,A as f,D as v,E as _,G as h,H as E,J as K,K as B,L as J,M as g,N as a,O as r,P as m,Q as c,R as s,S as D,T as F,U as u,V as o,W as w,X as x,Y as W,Z as q,_ as z,ba as X,ca as G,da as H,fa as M,ga as Q,ha as Y,i as j,ia as Z,k as P,la as ee,m as b,ma as te,n as y,u as L,x as A,y as l}from"./chunk-J6G7KG5U.js";function O(){return""}function re(){return{studentId:"",firstname:"",lastname:"",age:0,autobiography:"",friends:[O()]}}function le(n,i){if(n&1){let e=D();a(0,"div")(1,"button",5),F("click",function(){let d=b(e).$index,p=u();return y(p.moveFriend(d,-1))}),o(2,"^"),r(),a(3,"button",5),F("click",function(){let d=b(e).$index,p=u();return y(p.moveFriend(d,1))}),o(4,"v"),r(),a(5,"label")(6,"b"),o(7),r(),m(8,"input",1),v(),r(),a(9,"button",5),F("click",function(){let d=b(e).$index,p=u();return y(p.removeFriend(d))}),o(10,"X"),r()()}if(n&2){let e=i.$implicit,t=i.$index,d=i.$index,p=i.$count,ae=i.$count;l(),g("disabled",d===0),l(2),g("disabled",d===ae-1),l(4),x("Friends ",t+1),l(),_(e,"formField"),l(),g("disabled",p===1)}}var I=class n{data=Y.required();friendCountKey=$();friendUcNameKey=$();form=ne(this.data,i=>{ie(i.friends,this.friendCountKey,({value:e})=>e().length)});addFriend(){this.form.friends().value.update(i=>[...i,O()])}removeFriend(i){this.form.friends().value.update(e=>e.filter((t,d)=>d!==i))}moveFriend(i,e){this.form.friends().value.update(t=>t.map((d,p)=>p===i+e?t[i]:p===i?t[i+e]:d))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-form"]],inputs:{data:[1,"data"]},outputs:{data:"dataChange"},decls:38,vars:16,consts:[[3,"disabled"],["type","text",3,"formField"],["type","number",3,"formField"],[3,"formField"],["type","button",3,"click"],["type","button",3,"click","disabled"]],template:function(e,t){e&1&&(a(0,"Fieldset",0)(1,"div")(2,"label")(3,"b"),o(4,"Student ID"),r(),m(5,"input",1),v(),r(),m(6,"br"),a(7,"label")(8,"b"),o(9,"Firstname"),r(),m(10,"input",1),v(),r(),m(11,"br"),a(12,"label")(13,"b"),o(14,"Lastname"),r(),m(15,"input",1),v(),r(),m(16,"br"),a(17,"label")(18,"b"),o(19,"Age"),r(),m(20,"input",2),v(),r(),m(21,"br"),a(22,"label")(23,"b"),o(24,"Biography"),r(),m(25,"textarea",3),v(),r(),m(26,"br"),r(),a(27,"fieldset",0)(28,"legend"),o(29),a(30,"button",4),F("click",function(){return t.addFriend()}),o(31,"+"),r()(),a(32,"div"),B(33,le,11,6,"div",null,K),r()()(),a(35,"div"),o(36),X(37,"json"),r()),e&2&&(g("disabled",t.form().disabled()),l(5),_(t.form.studentId,"formField"),l(5),_(t.form.firstname,"formField"),l(5),_(t.form.lastname,"formField"),l(5),_(t.form.age,"formField"),l(5),_(t.form.autobiography,"formField"),l(2),g("disabled",t.form.friends().disabled()),l(2),x(" Friends (",t.form.friends().metadata(t.friendCountKey)(),") "),l(4),J(t.form.friends),l(3),w(G(37,14,t.data())))},dependencies:[oe,Z],encapsulation:2,changeDetection:0})};var de="profile-data",C=class n{keyName=`${P(A)}-${de}`;async get(){return JSON.parse(localStorage.getItem(this.keyName)??"null")}async set(i){return localStorage.setItem(this.keyName,JSON.stringify(i))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function me(n,i){if(n&1){let e=D();a(0,"app-profile-form",1),U("dataChange",function(d){b(e);let p=u();return z(p.dataResource.value,d)||(p.dataResource.value=d),y(d)}),r()}if(n&2){let e=u();q("data",e.dataResource.value)}}var k=class n{dataStorage=P(C);dataResource=M({loader:async()=>await this.dataStorage.get()??re()});constructor(){L(()=>{this.dataResource.hasValue()&&this.dataStorage.set(this.dataResource.value())})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-form-page"]],decls:1,vars:1,consts:[[3,"data"],[3,"dataChange","data"]],template:function(e,t){e&1&&h(0,me,1,1,"app-profile-form",0),e&2&&E(t.dataResource.hasValue()?0:-1)},dependencies:[I],encapsulation:2,changeDetection:0})};var N=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-root"]],decls:10,vars:0,consts:[[1,"app-cmp-nav"],["routerLink","./view","routerLinkActive","active"],["routerLink","./form","routerLinkActive","active"],[1,"fade-in-content"]],template:function(e,t){e&1&&(a(0,"nav")(1,"ul",0)(2,"li")(3,"a",1),o(4," View "),r()(),a(5,"li")(6,"a",2),o(7," Form "),r()()()(),a(8,"div",3),m(9,"router-outlet"),r())},dependencies:[ee,te],styles:['@charset "UTF-8";nav[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.app-cmp-nav[_ngcontent-%COMP%]{display:inline-flex;background-color:#764ba214;padding:6px;border-radius:50px;list-style:none;margin:0;gap:5px;box-shadow:inset 0 2px 4px #00000005}.app-cmp-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex}.app-cmp-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#6c757d;font-weight:600;font-size:.95rem;padding:8px 30px;border-radius:40px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.app-cmp-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2;background-color:#ffffff80}.app-cmp-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 10px #764ba24d;transform:scale(1.02)}'],changeDetection:0})};var R=class n{data=Q.required();friends=H(()=>this.data().friends.join(", "));static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-view"]],inputs:{data:[1,"data"]},decls:21,vars:6,template:function(e,t){e&1&&(c(0,"dl")(1,"dt"),o(2,"Student ID"),s(),c(3,"dd"),o(4),s(),c(5,"dt"),o(6,"Fullname"),s(),c(7,"dd"),o(8),s(),c(9,"dt"),o(10,"Age"),s(),c(11,"dd"),o(12),s(),c(13,"dt"),o(14,"Autobiography"),s(),c(15,"dd"),o(16),s(),c(17,"dt"),o(18,"Friends"),s(),c(19,"dd"),o(20),s()()),e&2&&(l(4),x(" ",t.data().studentId," "),l(4),W("",t.data().firstname," ",t.data().lastname),l(4),x(" ",t.data().age," "),l(4),w(t.data().autobiography),l(4),w(t.friends()))},encapsulation:2,changeDetection:0})};function pe(n,i){n&1&&m(0,"app-profile-view",0),n&2&&g("data",i)}function ce(n,i){n&1&&(a(0,"p"),o(1,"Not Found"),r())}function se(n,i){if(n&1&&h(0,pe,1,1,"app-profile-view",0)(1,ce,2,0,"p"),n&2){let e,t=u();E((e=t.dataResource.value())?0:1,e)}}var T=class n{dataStorage=P(C);dataResource=M({loader:async()=>await this.dataStorage.get()});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-view-page"]],decls:1,vars:1,consts:[[3,"data"]],template:function(e,t){e&1&&h(0,se,2,1),e&2&&E(t.dataResource.hasValue()?0:-1)},dependencies:[R],encapsulation:2,changeDetection:0})};var ze=[{path:"",component:N,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:T},{path:"form",component:k}]}];export{ze as default};
